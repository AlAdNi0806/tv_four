# Zabbix Agent Configuration
PidFile=/var/run/zabbix/zabbix_agentd.pid
LogFile=/var/log/zabbix/zabbix_agentd.log
LogFileSize=0
Server=zabbix-server
ServerActive=zabbix-server
Hostname=monitoring-host

# Enable remote commands
EnableRemoteCommands=1

# User parameters for custom monitoring
UserParameter=custom.db.connections,psql -h postgres -U postgres -d monitoring_db -t -c "SELECT count(*) FROM pg_stat_activity;"
UserParameter=custom.app.status,curl -s http://app:8090/actuator/health | grep -o '"status":"[^"]*"' | cut -d'"' -f4

Include=/etc/zabbix/zabbix_agentd.d/*.conf